function main(){const l=96,s=.225,E=2,h=3.25;let c=0;const d=4+Math.floor(3*Math.random()),a=.05+.1*Math.random(),o=new THREE.Vector3(0,.375,0);let u=360*Math.random();const m=2+5*Math.random(),p=[],g=[],R=[],f=[],w=[],i=[],H=new THREE.Clock,r=new THREE.Vector3(0,0,1);var t=document.querySelector("#c");const T=new THREE.WebGLRenderer({canvas:t,alpha:!0});t=t.clientWidth/t.clientHeight;const M=new THREE.OrthographicCamera(t*h/-2,t*h/2,h/2,h/-2);M.position.z=2;const y=new THREE.Scene,e=function(){var n=document.createElement("canvas"),t=n.getContext("2d");n.width=512,n.height=512;var a=t.getImageData(0,0,n.width,n.height),o=a.data;const e=3+Math.floor(3*Math.random()),r=[],i=[.95,.95,.05,Math.random(),Math.random()].sort(()=>.5-Math.random());i.unshift(.95),i.push(.95);for(let t=0;t<e;t++)r.push(new THREE.Vector2(t/e,.01+Math.random()*(.1-.01)));r.push(new THREE.Vector2(1,r[0].y));var h=r[0],l=r[r.length-1];r.unshift(new THREE.Vector2(-1/r.length,l.y)),r.push(new THREE.Vector2(1+1/r.length,h.y));const s=new THREE.SplineCurve(r);for(let e=0;e<n.width;e++)for(let t=0;t<n.height/2;t++){var E=4*(t*a.width+e),c=e/n.width,d=t/n.height,u=Math.floor(c*(i.length-1)),m=c*(i.length-1)%1,m=THREE.MathUtils.lerp(i[u],i[u+1],m),c=s.getPoint(THREE.MathUtils.lerp(1/r.length,1-1/r.length,c));Math.abs(.25-d)<c.y*m?(o[E]=255,o[1+E]=255,o[2+E]=255):(m=1-Math.abs(.25-c.y*m*Math.sign(.25-d)-d)/((.25-c.y)*(1-m)),o[E]=255*m,o[1+E]=255*m,o[2+E]=255*m),o[3+E]=255}return t.putImageData(a,0,0),new THREE.CanvasTexture(n)}();e.wrapS=THREE.RepeatWrapping,e.wrapT=THREE.RepeatWrapping;const n=new THREE.MeshBasicMaterial({color:8177753});n.transparent=!0,n.alphaMap=e,function(){for(let t=0;t<d;t++)p.push({distance:.65*(1+Math.random()),position:new THREE.Vector3(.75*(2*Math.random()-.5)/d,.75*(2*Math.random()-.5)/d,0),target:new THREE.Vector3(.75*(2*Math.random()-.5)/d,.75*(2*Math.random()-.5)/d,0),d:0,speed:.05+.3*Math.random()})}(),A();let v=new THREE.CatmullRomCurve3(g,!0),x=v.computeFrenetFrames(l,!0);z();const b=new THREE.BufferGeometry;b.setIndex(i),b.setAttribute("position",new THREE.Float32BufferAttribute(R,3)),b.setAttribute("normal",new THREE.Float32BufferAttribute(f,3)),b.setAttribute("uv",new THREE.Float32BufferAttribute(w,2));const V=new THREE.Mesh(b,n);function A(){for(let t=g.length=0;t<d;t++){var e=p[t].position.lerp(p[t].target,p[t].d);const n=new THREE.Vector3(0,p[t].distance,0).add(e);n.applyAxisAngle(r,THREE.MathUtils.degToRad(u+t*(360/d))),g.push(o.clone().add(n))}}function z(){R.length=0,f.length=0,w.length=0;for(let t=i.length=0;t<l;t++)F(t);F(0),function(){for(let e=0;e<=l;e++)for(let t=0;t<=E;t++){const n=new THREE.Vector2;n.x=e/l+H.getElapsedTime()*a,n.y=t/E,w.push(n.x,n.y)}}(),function(){for(let e=1;e<=l;e++)for(let t=1;t<=E;t++){var n=(E+1)*(e-1)+(t-1),a=(E+1)*e+(t-1),o=(E+1)*e+t,r=(E+1)*(e-1)+t;i.push(n,a,r),i.push(a,o,r)}}()}function F(t){var e=new THREE.Vector3,e=v.getPointAt(t/l,e),n=x.normals[t],a=x.binormals[t];for(let t=0;t<=E;t++){var o=t/E*Math.PI*2,r=Math.cos(o),o=-Math.sin(o);const i=new THREE.Vector3;i.x=o*n.x+r*a.x,i.y=o*n.y+r*a.y,i.z=o*n.z+r*a.z,i.normalize(),f.push(i.x,i.y,i.z);const h=new THREE.Vector3;h.x=e.x+s*i.x,h.y=e.y+s*i.y,h.z=e.z+s*i.z,R.push(h.x,h.y,h.z)}}y.add(V),requestAnimationFrame(function t(e){var n,a,o,r,i;c=H.getDelta(),n=T,a=n.domElement,o=window.devicePixelRatio,r=a.clientWidth*o|0,i=a.clientHeight*o|0,(o=a.width!==r||a.height!==i)&&(M.right=a.clientWidth/a.clientHeight*h/2,M.left=a.clientWidth/a.clientHeight*h/-2,n.setSize(r,i,!1)),o&&(o=T.domElement,M.aspect=o.clientWidth/o.clientHeight,M.updateProjectionMatrix()),T.render(y,M),function(){for(let t=0;t<d;t++)p[t].d+=p[t].speed*c,1<=p[t].d&&(p[t].d=0,p[t].speed=.1+.5*Math.random(),p[t].position=p[t].target,p[t].target=new THREE.Vector3(.75*(2*Math.random()-.5)/d,.75*(2*Math.random()-.5)/d,0));u-=m*c,A()}(),v=new THREE.CatmullRomCurve3(g,!0),x=v.computeFrenetFrames(l,!0),z(),V.geometry.attributes.uv=new THREE.Float32BufferAttribute(w,2),V.geometry.attributes.uv.needsUpdate=!0,function(){for(let t=0;t<R.length;t++)V.geometry.attributes.position.array[t]=R[t];V.geometry.attributes.position.needsUpdate=!0}(),requestAnimationFrame(t)})}main();